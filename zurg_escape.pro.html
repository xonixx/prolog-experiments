<blockquote><code><font size="2" face="Courier New"><b>time</b>(john, 5).<br><b>time</b>(pit, 10).<br><b>time</b>(tom, 20).<br><b>time</b>(pat, 25).<br><b>all</b>([john, pit, tom, pat]).<br><br><b>without</b>(<font color="#808000"><i>With</i></font>, <font color="#808000"><i>Without</i></font>, <font color="#808000"><i>R</i></font>) :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>member</b></font>(<font color="#808000"><i>R</i></font>, <font color="#808000"><i>With</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>\+</b></font> <font color="blue"><b>member</b></font>(<font color="#808000"><i>R</i></font>, <font color="#808000"><i>Without</i></font>).<br><br><font color="#909090"><i>% generate all possible pairs</i></font><br><b>allPairs</b>([<font color="#808000"><i>H</i></font> | <font color="#808000"><i>T</i></font>], <font color="#808000"><i>H</i></font>, <font color="#808000"><i>P2</i></font>) :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>member</b></font>(<font color="#808000"><i>P2</i></font>, <font color="#808000"><i>T</i></font>).<br><br><b>allPairs</b>([_ | <font color="#808000"><i>T</i></font>], <font color="#808000"><i>P1</i></font>, <font color="#808000"><i>P2</i></font>) :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>allPairs</b>(<font color="#808000"><i>T</i></font>, <font color="#808000"><i>P1</i></font>, <font color="#808000"><i>P2</i></font>).<br><br><font color="#909090"><i>% perform single step</i></font><br><b>step</b>(<b>state</b>(<font color="#808000"><i>L</i></font>, yes), <b>state</b>(<font color="#808000"><i>L1</i></font>, no), <font color="#808000"><i>Time</i></font>) :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>allPairs</b>(<font color="#808000"><i>L</i></font>, <font color="#808000"><i>T1</i></font>, <font color="#808000"><i>T2</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>findall</b></font>(<font color="#808000"><i>T</i></font>, <b>without</b>(<font color="#808000"><i>L</i></font>, [<font color="#808000"><i>T1</i></font>, <font color="#808000"><i>T2</i></font>], <font color="#808000"><i>T</i></font>), <font color="#808000"><i>L1</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>time</b>(<font color="#808000"><i>T1</i></font>, <font color="#808000"><i>Time1</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>time</b>(<font color="#808000"><i>T2</i></font>, <font color="#808000"><i>Time2</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#808000"><i>Time</i></font> <font color="blue"><b>is</b></font> <b>max</b>(<font color="#808000"><i>Time1</i></font>, <font color="#808000"><i>Time2</i></font>).<br><br><b>step</b>(<b>state</b>(<font color="#808000"><i>L</i></font>, no), <b>state</b>(<font color="#808000"><i>L1</i></font>, yes), <font color="#808000"><i>Time</i></font>) :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>all</b>(<font color="#808000"><i>All</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>without</b>(<font color="#808000"><i>All</i></font>, <font color="#808000"><i>L</i></font>, <font color="#808000"><i>T</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>append</b></font>([<font color="#808000"><i>T</i></font>], <font color="#808000"><i>L</i></font>, <font color="#808000"><i>L1</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>time</b>(<font color="#808000"><i>T</i></font>, <font color="#808000"><i>Time</i></font>).<br><br><font color="#909090"><i>% solve - perform steps while time left > 0</i></font><br><b>solve</b>(<font color="#808000"><i>Inp</i></font>, <font color="#808000"><i>Out</i></font>, <font color="#808000"><i>TimeGiven</i></font>, [(<font color="#808000"><i>Inp</i></font>-><font color="#808000"><i>S1</i></font>/<font color="#808000"><i>TimeGiven1</i></font>) | <font color="#808000"><i>T</i></font>]) :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#808000"><i>TimeGiven</i></font> > 0,<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>step</b>(<font color="#808000"><i>Inp</i></font>, <font color="#808000"><i>S1</i></font>, <font color="#808000"><i>Time</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#808000"><i>TimeGiven1</i></font> <font color="blue"><b>is</b></font> <font color="#808000"><i>TimeGiven</i></font> - <font color="#808000"><i>Time</i></font>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>solve</b>(<font color="#808000"><i>S1</i></font>, <font color="#808000"><i>Out</i></font>, <font color="#808000"><i>TimeGiven1</i></font>, <font color="#808000"><i>T</i></font>).<br><br><b>solve</b>(<b>state</b>([], _), _, <font color="#808000"><i>TimeGiven</i></font>, []) :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#808000"><i>TimeGiven</i></font> ><font color="blue"><b>=</b></font> 0.<br><br><font color="#909090"><i>% print all solutions</i></font><br><b>solve</b> :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>all</b>(<font color="#808000"><i>All</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>forall</b></font>(<b>solve</b>(<b>state</b>(<font color="#808000"><i>All</i></font>, yes), _, 60, <font color="#808000"><i>Solution</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>formatSolution</b>(<font color="#808000"><i>Solution</i></font>)).<br><br><b>formatSolution</b>(<font color="#808000"><i>States</i></font>) :-<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>nl</b></font>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>writeln</b>(<font color="#008000">'Solution:'</font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>forall</b></font>(<font color="blue"><b>member</b></font>(<b>state</b>(<font color="#808000"><i>L1</i></font>, <font color="#808000"><i>Has1</i></font>)-><b>state</b>(<font color="#808000"><i>L2</i></font>, <font color="#808000"><i>Has2</i></font>)/<font color="#808000"><i>T</i></font>, <font color="#808000"><i>States</i></font>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue"><b>format</b></font>(<font color="#008000">'~w ~w -> ~w ~w, time remains:~w~n'</font>, [<font color="#808000"><i>L1</i></font>, <font color="#808000"><i>Has1</i></font>, <font color="#808000"><i>L2</i></font>, <font color="#808000"><i>Has2</i></font>, <font color="#808000"><i>T</i></font>])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br><br><br></font></code></blockquote>